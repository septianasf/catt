(function(_0x962f28,_0x2dbd39){const _0x416685=a17_0x4bd0,_0x4320ba=_0x962f28();while(!![]){try{const _0x16b77d=parseInt(_0x416685(0xd3))/0x1+parseInt(_0x416685(0xb4))/0x2+parseInt(_0x416685(0x9c))/0x3+-parseInt(_0x416685(0xa0))/0x4+parseInt(_0x416685(0xa1))/0x5*(-parseInt(_0x416685(0xbf))/0x6)+-parseInt(_0x416685(0xcb))/0x7*(parseInt(_0x416685(0xa5))/0x8)+-parseInt(_0x416685(0x94))/0x9*(-parseInt(_0x416685(0x95))/0xa);if(_0x16b77d===_0x2dbd39)break;else _0x4320ba['push'](_0x4320ba['shift']());}catch(_0x2d0ff6){_0x4320ba['push'](_0x4320ba['shift']());}}}(a17_0x45af,0xb2a60));function a17_0x4bd0(_0x2a51cf,_0x977334){const _0x45afd7=a17_0x45af();return a17_0x4bd0=function(_0x4bd0ec,_0x4ee1b3){_0x4bd0ec=_0x4bd0ec-0x93;let _0x44871e=_0x45afd7[_0x4bd0ec];return _0x44871e;},a17_0x4bd0(_0x2a51cf,_0x977334);}function a17_0x45af(){const _0xd7c57e=['reconnectInterval','Max\x20reconnect\x20attempts\x20reached','reconnectAttempts','DelCatAck','Connected\x20to\x20game\x20server','2186223QANuct','readyState','blackBright','GetAirDropCatAck','1229232fEShpi','5969735JfLDkU','onLogs','Delete\x20Cats\x20LVL','onEvents','8XtipvN','setOnEvents','whiteBright','parse','attemptReconnect','magentaBright','close','transId','maxReconnectAttempts','connect','goldTime','websocketOption','runtimeHeartBeatReq','user','message','1103034yDsTeb','OPEN','data','HeartBeatAck','defineProperty','credentials','cats','logCallback','greenBright','checkMergerOrDeleteCats','hex','6ogznvE','airdropIndex','isConnected','EnterGameAck','MergeCatAck','eventCallback','yellowBright','url','redBright','toString','gold','from','7490854cPObfh','runtimeGetAirDropCatReq','Got\x20Airdrop\x20Cat\x20LVL','Gold','runtimeGatherGoldReq','length','setOnLogs','Collected','44191EWmytX','WebSocket\x20error:\x20','handleMessage','send','1113003fnhRsM','160oQijbb','error'];a17_0x45af=function(){return _0xd7c57e;};return a17_0x45af();}import a17_0x5d4ccb from'ws';import{createDelCatReq,createGatherGoldReq,createGetAirDropCatReq,createHeartBeatReq,createMergeCatReq,decodeMessage,getDuplicateLvl,getSmallestCatsLvl}from'./helper.js';import{formatNumber,getOrdinalSuffix}from'../utils/helper.js';import a17_0x4de381 from'chalk';export class WebSocketClient{constructor(_0x17acad){const _0x19c03c=a17_0x4bd0;Object[_0x19c03c(0xb8)](this,'url',{'enumerable':!![],'configurable':!![],'writable':!![],'value':void 0x0}),Object[_0x19c03c(0xb8)](this,_0x19c03c(0xb9),{'enumerable':!![],'configurable':!![],'writable':!![],'value':void 0x0}),Object[_0x19c03c(0xb8)](this,'reconnectInterval',{'enumerable':!![],'configurable':!![],'writable':!![],'value':void 0x0}),Object['defineProperty'](this,_0x19c03c(0xad),{'enumerable':!![],'configurable':!![],'writable':!![],'value':void 0x0}),Object[_0x19c03c(0xb8)](this,_0x19c03c(0x99),{'enumerable':!![],'configurable':!![],'writable':!![],'value':void 0x0}),Object['defineProperty'](this,'websocketOption',{'enumerable':!![],'configurable':!![],'writable':!![],'value':void 0x0}),Object['defineProperty'](this,_0x19c03c(0xac),{'enumerable':!![],'configurable':!![],'writable':!![],'value':0x1}),Object['defineProperty'](this,'ws',{'enumerable':!![],'configurable':!![],'writable':!![],'value':void 0x0}),Object[_0x19c03c(0xb8)](this,_0x19c03c(0xbb),{'enumerable':!![],'configurable':!![],'writable':!![],'value':void 0x0}),Object[_0x19c03c(0xb8)](this,_0x19c03c(0xc4),{'enumerable':!![],'configurable':!![],'writable':!![],'value':void 0x0}),Object[_0x19c03c(0xb8)](this,'isConnected',{'enumerable':!![],'configurable':!![],'writable':!![],'value':![]}),Object['defineProperty'](this,_0x19c03c(0xb2),{'enumerable':!![],'configurable':!![],'writable':!![],'value':null}),Object[_0x19c03c(0xb8)](this,_0x19c03c(0xae),{'enumerable':!![],'configurable':!![],'writable':!![],'value':()=>{const _0x347d1f=_0x19c03c;this['ws']=new a17_0x5d4ccb(this[_0x347d1f(0xc6)],this[_0x347d1f(0xb0)]),this['ws']['on']('open',()=>{const _0x4703fd=_0x347d1f,_0x304b19=Buffer[_0x4703fd(0xca)](this[_0x4703fd(0xb9)],_0x4703fd(0xbe));this[_0x4703fd(0x93)](_0x304b19),this['reconnectAttempts']=0x0,this[_0x4703fd(0xa6)]({'event':'open'});}),this['ws']['on'](_0x347d1f(0xb3),_0x40a4a7=>{const _0x4449ad=_0x347d1f;this[_0x4449ad(0xd5)](_0x40a4a7);}),this['ws']['on']('close',()=>{const _0x17f24c=_0x347d1f;this[_0x17f24c(0xa9)](),this[_0x17f24c(0xc1)]=![],this[_0x17f24c(0xa6)]({'event':_0x17f24c(0xab)});}),this['ws']['on'](_0x347d1f(0x96),_0x70f0e8=>{const _0x1076d3=_0x347d1f;this[_0x1076d3(0xd1)](''+a17_0x4de381[_0x1076d3(0xc7)](_0x1076d3(0xd4)+_0x70f0e8)),this['isConnected']=![],this[_0x1076d3(0xa6)]({'event':'error'});});}}),Object[_0x19c03c(0xb8)](this,_0x19c03c(0xd1),{'enumerable':!![],'configurable':!![],'writable':!![],'value':_0x3b188b=>{const _0xc4a8d3=_0x19c03c;this[_0xc4a8d3(0xbb)]&&this['logCallback'](_0x3b188b);}}),Object['defineProperty'](this,'setOnEvents',{'enumerable':!![],'configurable':!![],'writable':!![],'value':_0x4c60c0=>{const _0x5bd4b4=_0x19c03c;this[_0x5bd4b4(0xc4)]&&this[_0x5bd4b4(0xc4)](_0x4c60c0);}}),Object[_0x19c03c(0xb8)](this,'handleMessage',{'enumerable':!![],'configurable':!![],'writable':!![],'value':async _0x1d6cca=>{const _0x214e7a=_0x19c03c;let _0x392440;while(!![]){try{_0x392440=await decodeMessage(_0x1d6cca[_0x214e7a(0xc8)](_0x214e7a(0xbe)));break;}catch(_0x365cc4){}}const _0x23dcc7=JSON[_0x214e7a(0xa8)](_0x392440);switch(_0x23dcc7['protoName']){case _0x214e7a(0xc2):this['user']=_0x23dcc7['data']['userInfo'],this[_0x214e7a(0xb1)](),this[_0x214e7a(0xcf)](),this[_0x214e7a(0xcc)](),this['isConnected']=!![],this[_0x214e7a(0xbd)](),this['setOnLogs'](''+a17_0x4de381[_0x214e7a(0xbc)](_0x214e7a(0x9b))),this[_0x214e7a(0xa6)]({'event':_0x214e7a(0xae)});break;case'GatherGoldAck':if(this[_0x214e7a(0xb2)]){const _0x48b128=formatNumber(parseInt(_0x23dcc7['data'][_0x214e7a(0xc9)])-parseInt(this['user'][_0x214e7a(0xc9)]));this[_0x214e7a(0xb2)]['gold']=_0x23dcc7[_0x214e7a(0xb6)][_0x214e7a(0xc9)],this[_0x214e7a(0xb2)][_0x214e7a(0xaf)]=_0x23dcc7[_0x214e7a(0xb6)]['goldTime'],this[_0x214e7a(0xd1)](a17_0x4de381['greenBright'](_0x214e7a(0xd2))+'\x20'+a17_0x4de381[_0x214e7a(0xa7)](_0x48b128)+'\x20'+a17_0x4de381[_0x214e7a(0xbc)](_0x214e7a(0xce))),this[_0x214e7a(0xa6)]({'event':_0x214e7a(0xb2)});}break;case _0x214e7a(0x9f):this['user']&&(_0x23dcc7[_0x214e7a(0xb6)][_0x214e7a(0xc0)]!==-0x1&&_0x23dcc7['data'][_0x214e7a(0xc0)]!==undefined&&(this['user'][_0x214e7a(0xba)]=_0x23dcc7[_0x214e7a(0xb6)][_0x214e7a(0xba)],this['checkMergerOrDeleteCats'](),this[_0x214e7a(0xd1)](a17_0x4de381[_0x214e7a(0xaa)](_0x214e7a(0xcd))+'\x20'+a17_0x4de381[_0x214e7a(0xa7)](_0x23dcc7[_0x214e7a(0xb6)]['cats'][_0x23dcc7[_0x214e7a(0xb6)]['airdropIndex']])),this[_0x214e7a(0xa6)]({'event':'user'})));break;case _0x214e7a(0xc3):this[_0x214e7a(0xb2)]&&(this[_0x214e7a(0xb2)][_0x214e7a(0xba)]=_0x23dcc7['data'][_0x214e7a(0xba)],this[_0x214e7a(0xbd)](),this[_0x214e7a(0xa6)]({'event':_0x214e7a(0xb2)}));break;case _0x214e7a(0x9a):this[_0x214e7a(0xb2)]&&(this['user'][_0x214e7a(0xba)]=_0x23dcc7[_0x214e7a(0xb6)][_0x214e7a(0xba)],this['setOnEvents']({'event':_0x214e7a(0xb2)}));break;case _0x214e7a(0xb7):break;default:}}}),Object['defineProperty'](this,_0x19c03c(0xa9),{'enumerable':!![],'configurable':!![],'writable':!![],'value':()=>{const _0xe94597=_0x19c03c;this[_0xe94597(0x99)]<this[_0xe94597(0xad)]?setTimeout(()=>{const _0x10327e=_0xe94597;this[_0x10327e(0xd1)](a17_0x4de381[_0x10327e(0xc5)]('Reconnecting...')+'\x20'+a17_0x4de381[_0x10327e(0x9e)]('('+(this[_0x10327e(0x99)]+0x1)+')')),this[_0x10327e(0x99)]++,this[_0x10327e(0xae)]();},this[_0xe94597(0x97)]):this[_0xe94597(0xd1)](''+a17_0x4de381[_0xe94597(0xc7)](_0xe94597(0x98)));}}),Object['defineProperty'](this,_0x19c03c(0xb1),{'enumerable':!![],'configurable':!![],'writable':!![],'value':()=>{const _0x4fce83=async()=>{const _0x32c8c4=a17_0x4bd0;if(this[_0x32c8c4(0xb2)]&&this[_0x32c8c4(0xc1)])try{this[_0x32c8c4(0xac)]++;const _0x25cde8=await createHeartBeatReq(this[_0x32c8c4(0xac)]),_0x1367e8=Buffer[_0x32c8c4(0xca)](_0x25cde8,_0x32c8c4(0xbe));this['send'](_0x1367e8);}catch(_0x715b94){}};setInterval(_0x4fce83,0x3e8);}}),Object[_0x19c03c(0xb8)](this,_0x19c03c(0xcf),{'enumerable':!![],'configurable':!![],'writable':!![],'value':()=>{const _0x27433d=async()=>{const _0x236d5c=a17_0x4bd0;if(this[_0x236d5c(0xb2)]&&this[_0x236d5c(0xc1)])try{this[_0x236d5c(0xac)]++;const _0x56ce22=await createGatherGoldReq(this[_0x236d5c(0xac)]),_0x419312=Buffer[_0x236d5c(0xca)](_0x56ce22,_0x236d5c(0xbe));this['send'](_0x419312);}catch(_0xd67965){}};setInterval(_0x27433d,0x2710);}}),Object[_0x19c03c(0xb8)](this,'runtimeGetAirDropCatReq',{'enumerable':!![],'configurable':!![],'writable':!![],'value':()=>{const _0x5bd8ed=async()=>{const _0x7056d6=a17_0x4bd0;if(this[_0x7056d6(0xb2)]&&this[_0x7056d6(0xc1)])try{this[_0x7056d6(0xac)]++;const _0x1549ba=await createGetAirDropCatReq(this['transId']),_0x2a66b8=Buffer[_0x7056d6(0xca)](_0x1549ba,_0x7056d6(0xbe));this[_0x7056d6(0x93)](_0x2a66b8);}catch(_0x4c3a88){}};setInterval(_0x5bd8ed,0x61a8);}}),Object[_0x19c03c(0xb8)](this,_0x19c03c(0xbd),{'enumerable':!![],'configurable':!![],'writable':!![],'value':async()=>{const _0x469961=_0x19c03c;if(this['user']&&this['isConnected']){const _0x330f05=getDuplicateLvl(this['user'][_0x469961(0xba)]);if(_0x330f05[_0x469961(0xd0)]>0x0&&_0x330f05[0x0]!==undefined)try{this['transId']++;const _0x33db0f=await createMergeCatReq(this['transId'],_0x330f05[0x0]);this[_0x469961(0xd1)](a17_0x4de381[_0x469961(0xbc)]('Mate\x20The')+'\x20'+a17_0x4de381[_0x469961(0xa7)](getOrdinalSuffix(_0x330f05[0x0][0x0]+0x1))+'\x20'+a17_0x4de381[_0x469961(0xbc)]('And')+'\x20'+a17_0x4de381[_0x469961(0xa7)](getOrdinalSuffix(_0x330f05[0x0][0x1]+0x1))+'\x20'+a17_0x4de381[_0x469961(0xbc)]('Cats'));const _0x38cb26=Buffer[_0x469961(0xca)](_0x33db0f,'hex');this[_0x469961(0x93)](_0x38cb26);}catch(_0x48a189){}else{if(this[_0x469961(0xb2)][_0x469961(0xba)]['filter'](_0x56fc9c=>_0x56fc9c===0x0)['length']<0x1){const _0x1d880e=getSmallestCatsLvl(this[_0x469961(0xb2)][_0x469961(0xba)]);try{if(this[_0x469961(0xb2)][_0x469961(0xba)][_0x1d880e]!==0x0){this['transId']++;const _0x33d638=await createDelCatReq(this[_0x469961(0xac)],_0x1d880e);this[_0x469961(0xd1)](a17_0x4de381[_0x469961(0xc7)](_0x469961(0xa3))+'\x20'+a17_0x4de381[_0x469961(0xa7)](this[_0x469961(0xb2)][_0x469961(0xba)][_0x1d880e]));const _0x13aaaf=Buffer[_0x469961(0xca)](_0x33d638,_0x469961(0xbe));this['send'](_0x13aaaf);}}catch(_0x503f78){}}}}}}),Object[_0x19c03c(0xb8)](this,_0x19c03c(0xa2),{'enumerable':!![],'configurable':!![],'writable':!![],'value':_0x23e097=>{const _0x16865c=_0x19c03c;this[_0x16865c(0xbb)]=_0x23e097;}}),Object[_0x19c03c(0xb8)](this,_0x19c03c(0xa4),{'enumerable':!![],'configurable':!![],'writable':!![],'value':_0x1a82c6=>{const _0x1d57be=_0x19c03c;this[_0x1d57be(0xc4)]=_0x1a82c6;}}),Object[_0x19c03c(0xb8)](this,_0x19c03c(0x93),{'enumerable':!![],'configurable':!![],'writable':!![],'value':_0x2dbab2=>{const _0x1483f4=_0x19c03c;this['ws']&&this['ws'][_0x1483f4(0x9d)]===a17_0x5d4ccb[_0x1483f4(0xb5)]&&this['ws']['send'](_0x2dbab2);}}),Object[_0x19c03c(0xb8)](this,_0x19c03c(0xab),{'enumerable':!![],'configurable':!![],'writable':!![],'value':()=>{this['ws']&&this['ws']['close']();}}),this[_0x19c03c(0xc6)]=_0x17acad[_0x19c03c(0xc6)],this[_0x19c03c(0xb9)]=_0x17acad[_0x19c03c(0xb9)],this[_0x19c03c(0x97)]=_0x17acad[_0x19c03c(0x97)]||0x1388,this[_0x19c03c(0xad)]=_0x17acad[_0x19c03c(0xad)]||0xa,this[_0x19c03c(0xb0)]=_0x17acad[_0x19c03c(0xb0)]||{},this['reconnectAttempts']=0x0,this['ws']=null,this[_0x19c03c(0xae)]();}}